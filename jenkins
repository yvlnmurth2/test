pipeline {
   agent any
//{
 //   kubernetes {
  //    cloud 'openshift-test'  
    //  inheritFrom 'jenkins-agent' any
    //}
  //}
    stages {
        stage('Stage 1') {
            steps {
                echo 'building ${JOB_NAME}'
                echo 'Hello world!'
                //sh 
                sh "oc start-build build-with-docker --from-dir .
            }
        }
    stage('Publish Image') {
         steps{
            container('oc') {
               sh "oc start-build build-with-docker --from-dir ." docker
            }
         }
        }
    }
    post{
        success{
            echo 'sending email!' 
        }
    }
}
